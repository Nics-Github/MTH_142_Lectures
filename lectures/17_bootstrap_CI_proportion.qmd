---
title: "Bootstrap and mathematical confidence intervals"
subtitle: "for a porportion"
author: "Schwab"
format: 
  revealjs:
    theme: beige
editor: visual
execute: 
  echo: true
---

## Load the libraries

```{r}
#| echo: true

library(tidyverse)
library(infer)
library(openintro)
```

## Goal

We are going to find a confidence interval using a non-parametric bootstrap and infer.

> Confidence interval: a set of numbers that contains the true population proportion with a given degree of certainty.

## What is the parameter?

We want to know the correct proportion of red balls in the container.

We want to know **p -** the proportion of red balls.

## Non-parametric bootstrap

::: incremental
-   Since we don't know p we have to use our random sample to make the bootstrap distribution.

-   Doing this will feel like Wednesday's parametric distribution but our bags represent a random sample from the population.

-   (All the bags are the same, but based on a sample that was gathered randomly).


:::

## Find 3 bootstrap $\hat{p}$ per group

::: incremental
1.  Your bootstrap sample n=25

2.  Take a marble out, note its color replace it.

3.  Find $\hat{p}$

4.  Each group do this three times.

5.  Graph your $\hat{p}s$ on the number line on the chalk board.

6.  This will be our bootstrap distribution with 100ish reps.
:::

## Pin the tail on the CI

This is just like pin the tail on the donkey.

## Make a tibble of our scenario

Red balls, White balls.

```{r a-tibble}
# this is the random sample of marbles in R form (This code is nicer than Wednesdays)
marbles <- tibble(
  marble_color = c(rep("Red", 6), rep("White", 19))
)
```

## Find the proportion

```{r}
marbles |>
  specify(response = marble_color, success = "Red") |>
  calculate(stat = "prop")
```

## Bootstrap then ci

```{r}
set.seed(2024)

marbles %>%
  #specify the success
  specify(response = marble_color, success = "Red") |>
  
  # Find the number of proportions 
  generate(reps = 100, type = "bootstrap") |>
  
  # Calculate the statistic
  calculate(stat = "prop") |>
  
  # Have R get the ci
  get_ci(level = 0.95)
```
(note that we leave out hypothesize())

## The population parameter

The true parameter for the red marbles is: $$ p = \frac{400}{2200} = 0.1818182 $$

## When to find the CI

::: incremental
-   We will find confidence intervals when we do not know the parameter.

-   (We could do hypothesis testing with CIs, but we will not do that)
:::
